<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DVLFams — Apply</title>
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Share+Tech+Mono&family=Oswald:wght@300;400;700&display=swap" rel="stylesheet"/>
  <style>
:root {
  --red: #cc0000;
  --red-dim: #7a0000;
  --red-glow: rgba(204,0,0,0.35);
  --black: #060606;
  --dark: #0e0e0e;
  --border: #1f1f1f;
  --white: #ffffff;
  --mono: 'Share Tech Mono', monospace;
  --display: 'Anton', sans-serif;
  --body: 'Oswald', sans-serif;
}
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; background: var(--black); color: var(--white); font-family: var(--body); overflow-x: hidden; }

.bg-grid { position: fixed; inset: 0; background-image: linear-gradient(rgba(204,0,0,0.04) 1px, transparent 1px), linear-gradient(90deg, rgba(204,0,0,0.04) 1px, transparent 1px); background-size: 40px 40px; pointer-events: none; z-index: 0; }
.bg-scanline { position: fixed; inset: 0; background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.08) 2px, rgba(0,0,0,0.08) 4px); pointer-events: none; z-index: 0; }
.bg-glow { position: fixed; top: 0; left: 50%; transform: translateX(-50%); width: 800px; height: 400px; background: radial-gradient(ellipse at top, rgba(180,0,0,0.12) 0%, transparent 70%); pointer-events: none; z-index: 0; }

.wrapper { position: relative; z-index: 1; min-height: 100vh; display: grid; grid-template-columns: 380px 1fr; }

/* LEFT */
.left-panel { background: #0a0a0a; border-right: 1px solid var(--border); position: relative; overflow: hidden; }
.left-panel::before { content: 'DVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMSDVLFAMS'; position: absolute; bottom: -10px; left: -10px; font-family: var(--display); font-size: 80px; line-height: 0.85; color: rgba(204,0,0,0.04); word-break: break-all; letter-spacing: -2px; pointer-events: none; width: 120%; }
.left-panel::after { content: ''; position: absolute; top: 0; right: 0; width: 3px; height: 100%; background: linear-gradient(to bottom, transparent, var(--red), transparent); }
.left-inner { padding: 60px 40px; position: relative; z-index: 1; }

.tag { font-family: var(--mono); font-size: 11px; color: var(--red); letter-spacing: 2px; margin-bottom: 20px; animation: blink-tag 3s infinite; }
@keyframes blink-tag { 0%, 90%, 100% { opacity: 1; } 95% { opacity: 0.3; } }

.brand { font-family: var(--display); font-size: 80px; line-height: 0.9; letter-spacing: -2px; color: var(--white); cursor: pointer; }
.brand span { color: var(--red); display: block; text-shadow: 0 0 40px var(--red-glow); }

.brand-line { width: 100%; height: 3px; background: var(--red); margin: 24px 0; position: relative; box-shadow: 0 0 12px var(--red-glow); }
.brand-line::after { content: ''; position: absolute; right: 0; top: -2px; width: 8px; height: 8px; background: var(--red); transform: rotate(45deg); }

.brand-desc { font-family: var(--body); font-size: 16px; font-weight: 300; color: #888; line-height: 1.6; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 48px; }

.step-tracker { display: flex; flex-direction: column; gap: 0; margin-bottom: 48px; }
.step-item { display: flex; align-items: flex-start; gap: 16px; padding: 12px 0; border-bottom: 1px solid #161616; transition: all 0.2s; }
.step-num { font-family: var(--mono); font-size: 11px; color: #2a2a2a; width: 24px; flex-shrink: 0; padding-top: 2px; transition: color 0.3s; }
.step-line-wrap { display: flex; flex-direction: column; gap: 2px; flex: 1; }
.step-label-text { font-size: 12px; font-weight: 400; color: #2a2a2a; letter-spacing: 1px; text-transform: uppercase; line-height: 1.3; transition: color 0.3s; }
.step-bar { height: 1px; background: #1a1a1a; width: 0%; transition: width 0.5s ease, background 0.3s; }
.step-item.active .step-num { color: var(--red); }
.step-item.active .step-label-text { color: var(--white); }
.step-item.active .step-bar { width: 100%; background: var(--red); box-shadow: 0 0 6px var(--red-glow); }
.step-item.done .step-num { color: var(--red-dim); }
.step-item.done .step-label-text { color: #444; }
.step-item.done .step-bar { width: 100%; background: var(--red-dim); }

.warning-box { display: flex; align-items: center; gap: 12px; padding: 12px 16px; border: 1px solid #1f0000; background: rgba(100,0,0,0.1); font-family: var(--mono); font-size: 11px; color: #555; letter-spacing: 1px; }
.warn-icon { color: var(--red); font-weight: bold; font-size: 14px; }
.warning-box strong { color: #888; }

/* RIGHT */
.right-panel { background: var(--dark); display: flex; align-items: center; justify-content: center; padding: 60px 80px; position: relative; }
.right-panel::before { content: ''; position: absolute; top: 40px; right: 40px; width: 60px; height: 60px; border-top: 2px solid var(--red); border-right: 2px solid var(--red); opacity: 0.4; }
.right-panel::after { content: ''; position: absolute; bottom: 40px; left: 40px; width: 60px; height: 60px; border-bottom: 2px solid var(--red); border-left: 2px solid var(--red); opacity: 0.4; }

#question-screen { width: 100%; max-width: 500px; animation: fadeSlideIn 0.4s ease; }
@keyframes fadeSlideIn { from { opacity: 0; transform: translateY(16px); } to { opacity: 1; transform: translateY(0); } }

.q-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.q-tag { font-family: var(--mono); font-size: 13px; color: var(--red); letter-spacing: 4px; }
.q-progress-text { font-family: var(--mono); font-size: 11px; color: #333; letter-spacing: 3px; }

.progress-bar-wrap { height: 3px; background: #1a1a1a; margin-bottom: 40px; position: relative; overflow: visible; }
.progress-bar-fill { height: 100%; background: var(--red); transition: width 0.5s cubic-bezier(0.4,0,0.2,1); position: relative; }
.progress-bar-fill::after { content: ''; position: absolute; right: -1px; top: -3px; width: 9px; height: 9px; background: var(--red); transform: rotate(45deg); box-shadow: 0 0 10px var(--red-glow); }

.q-label { font-family: var(--display); font-size: 34px; line-height: 1.15; letter-spacing: 1px; color: var(--white); margin-bottom: 32px; text-transform: uppercase; }

.q-input-wrap textarea, .q-input-wrap input[type="text"] { width: 100%; background: transparent; border: none; border-bottom: 2px solid #2a2a2a; color: var(--white); font-family: var(--mono); font-size: 14px; padding: 16px 4px; outline: none; resize: none; letter-spacing: 1px; transition: border-color 0.3s; }
.q-input-wrap textarea { min-height: 110px; }
.q-input-wrap textarea:focus, .q-input-wrap input[type="text"]:focus { border-bottom-color: var(--red); }
.q-input-wrap textarea::placeholder, .q-input-wrap input::placeholder { color: #2a2a2a; font-size: 13px; }

.radio-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.radio-opt { padding: 16px 18px; border: 1px solid #1e1e1e; background: #0d0d0d; cursor: pointer; font-family: var(--body); font-size: 14px; font-weight: 400; color: #555; letter-spacing: 2px; text-transform: uppercase; transition: all 0.2s; position: relative; overflow: hidden; }
.radio-opt::before { content: ''; position: absolute; top: 0; left: 0; width: 3px; height: 100%; background: transparent; transition: background 0.2s; }
.radio-opt:hover { border-color: #3a0000; color: #aaa; background: #110000; }
.radio-opt:hover::before { background: #3a0000; }
.radio-opt.selected { border-color: var(--red); color: var(--white); background: #120000; }
.radio-opt.selected::before { background: var(--red); box-shadow: 2px 0 10px var(--red-glow); }

.q-actions { display: flex; justify-content: space-between; align-items: center; margin-top: 40px; }
.btn-back { background: transparent; border: none; color: #333; font-family: var(--mono); font-size: 12px; letter-spacing: 3px; cursor: pointer; display: flex; align-items: center; gap: 8px; transition: color 0.2s; padding: 0; }
.btn-back:hover { color: #666; }

.btn-next { background: var(--red); color: var(--white); border: none; font-family: var(--display); font-size: 20px; letter-spacing: 4px; padding: 14px 40px; cursor: pointer; display: flex; align-items: center; gap: 12px; transition: all 0.2s; position: relative; overflow: hidden; clip-path: polygon(0 0, calc(100% - 12px) 0, 100% 12px, 100% 100%, 12px 100%, 0 calc(100% - 12px)); }
.btn-next::before { content: ''; position: absolute; inset: 0; background: #ff1111; transform: translateX(-100%); transition: transform 0.3s; }
.btn-next:hover:not(:disabled)::before { transform: translateX(0); }
.btn-next:hover:not(:disabled) { box-shadow: 0 0 30px var(--red-glow); }
.btn-next span { position: relative; z-index: 1; }
.btn-next:disabled { background: #1a0000; color: #3a0000; cursor: not-allowed; }
.btn-arrow { font-size: 18px; }

/* SUCCESS */
#success-screen { width: 100%; max-width: 500px; text-align: center; animation: fadeSlideIn 0.5s ease; }
.success-tag { font-family: var(--mono); font-size: 11px; color: var(--red); letter-spacing: 3px; margin-bottom: 32px; }
.success-icon { width: 80px; height: 80px; border: 2px solid var(--red); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 28px; box-shadow: 0 0 40px var(--red-glow); animation: pulse-ring 2s infinite; }
@keyframes pulse-ring { 0%, 100% { box-shadow: 0 0 40px var(--red-glow); } 50% { box-shadow: 0 0 70px var(--red-glow); } }
.success-icon svg { width: 40px; height: 40px; }
.success-title { font-family: var(--display); font-size: 52px; line-height: 0.95; letter-spacing: 2px; color: var(--white); margin-bottom: 20px; }
.success-msg { font-size: 14px; font-weight: 300; color: #555; letter-spacing: 1px; line-height: 1.7; max-width: 360px; margin: 0 auto 28px; }
.success-code { font-family: var(--mono); font-size: 11px; color: #2a2a2a; letter-spacing: 3px; }
#admin-btn { margin-top: 24px; background: transparent; border: 1px solid #1a1a1a; color: #2a2a2a; padding: 10px 24px; font-family: var(--mono); font-size: 11px; letter-spacing: 3px; cursor: pointer; transition: all 0.2s; display: none; }
#admin-btn:hover { border-color: #333; color: #555; }

/* SUBMISSIONS */
.submissions-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 100; overflow-y: auto; padding: 40px; }
.submissions-inner { max-width: 800px; margin: 0 auto; }
.sub-topbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px; padding-bottom: 16px; border-bottom: 1px solid #1a1a1a; }
.sub-title { font-family: var(--mono); font-size: 18px; color: var(--red); letter-spacing: 4px; }
.sub-right { display: flex; align-items: center; gap: 20px; }
.sub-count { font-family: var(--mono); font-size: 12px; color: #444; letter-spacing: 2px; }
.sub-close { background: transparent; border: 1px solid #2a2a2a; color: #555; font-family: var(--mono); font-size: 11px; letter-spacing: 2px; padding: 8px 16px; cursor: pointer; transition: all 0.2s; }
.sub-close:hover { border-color: var(--red); color: var(--red); }
.sub-entry { border: 1px solid #161616; border-left: 3px solid var(--red); padding: 24px 28px; margin-bottom: 12px; background: #0a0a0a; }
.sub-user { font-family: var(--display); font-size: 24px; color: var(--red); letter-spacing: 3px; margin-bottom: 4px; }
.sub-time { font-family: var(--mono); font-size: 10px; color: #2a2a2a; letter-spacing: 2px; margin-bottom: 16px; }
.sub-qa { margin-bottom: 12px; }
.sub-q { font-family: var(--mono); font-size: 10px; color: #333; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 4px; }
.sub-a { font-size: 15px; font-weight: 300; color: #aaa; }
.sub-empty { text-align: center; font-family: var(--mono); color: #222; font-size: 13px; letter-spacing: 3px; padding: 80px; text-transform: uppercase; }

@media (max-width: 900px) {
  .wrapper { grid-template-columns: 1fr; }
  .left-panel { display: none; }
  .right-panel { padding: 40px 30px; min-height: 100vh; }
  .q-label { font-size: 26px; }
  .radio-group { grid-template-columns: 1fr; }
}
  </style>
</head>
<body>

  <div class="bg-grid"></div>
  <div class="bg-scanline"></div>
  <div class="bg-glow"></div>

  <div class="wrapper" id="form-wrapper">
    <div class="left-panel">
      <div class="left-inner">
        <div class="tag">// RECRUITMENT OPEN</div>
        <h1 class="brand" id="brand-logo">DVL<span>FAMS</span></h1>
        <div class="brand-line"></div>
        <p class="brand-desc">We don't accept everyone.<br/>Prove you belong here.</p>
        <div class="step-tracker" id="step-tracker"></div>
        <div class="warning-box">
          <span class="warn-icon">!</span>
          <span>Incomplete answers will be <strong>rejected</strong></span>
        </div>
      </div>
    </div>

    <div class="right-panel">
      <div id="question-screen">
        <div class="q-header">
          <div class="q-tag" id="q-tag">Q_01</div>
          <div class="q-progress-text" id="q-progress-text">01 / 05</div>
        </div>
        <div class="progress-bar-wrap">
          <div class="progress-bar-fill" id="progress-fill" style="width:0%"></div>
        </div>
        <div class="q-label" id="q-label"></div>
        <div class="q-input-wrap" id="q-input-wrap"></div>
        <div class="q-actions">
          <button class="btn-back" id="btn-back" onclick="prevStep()" type="button" style="visibility:hidden">
            <span class="btn-arrow">←</span> PREV
          </button>
          <button class="btn-next" id="btn-next" onclick="nextStep()" type="button" disabled>
            NEXT <span class="btn-arrow">→</span>
          </button>
        </div>
      </div>

      <div id="success-screen" style="display:none">
        <div class="success-tag">// TRANSMISSION RECEIVED</div>
        <div class="success-icon">
          <svg viewBox="0 0 60 60" fill="none">
            <polyline points="10,30 25,45 50,18" stroke="#cc0000" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h2 class="success-title">APPLICATION<br/>SUBMITTED</h2>
        <p class="success-msg">Your request has been logged. We will evaluate your application and reach out via Discord.</p>
        <div class="success-code" id="success-code"></div>
        <button id="admin-btn" onclick="showSubmissions()" type="button">[ VIEW SUBMISSIONS ]</button>
      </div>
    </div>
  </div>

  <div class="submissions-overlay" id="submissions-overlay" style="display:none">
    <div class="submissions-inner">
      <div class="sub-topbar">
        <div class="sub-title">// ALL SUBMISSIONS</div>
        <div class="sub-right">
          <span class="sub-count" id="sub-count">0 entries</span>
          <button class="sub-close" onclick="hideSubmissions()" type="button">✕ CLOSE</button>
        </div>
      </div>
      <div id="submissions-list"></div>
    </div>
  </div>

  <script>
const questions = [
  { id:"q1", netlifyKey:"why_join", short:"Why join?", label:"Why do you want to join our server?", type:"textarea", placeholder:"// type your reason here..." },
  { id:"q2", netlifyKey:"how_know", short:"How you heard?", label:"How did you know about DVLFams?", type:"textarea", placeholder:"// social media, referral, etc..." },
  { id:"q3", netlifyKey:"commitment", short:"Commitment?", label:"Can you give enough commitment?", type:"radio", options:["Yes, definitely!","I'll try my best","Maybe, not sure"] },
  { id:"q4", netlifyKey:"student_or_working", short:"Student or working?", label:"Are you a student or already working?", type:"radio", options:["Student","Working","Both","Neither"] },
  { id:"name", netlifyKey:"discord_username", short:"Discord tag", label:"Your Discord username?", type:"text", placeholder:"// username#0000" }
];

const STORAGE_KEY = "dvlfams_v2";
let step=0, answers={}, adminMode=false, adminClicks=0, submitted=false;

function getSubmissions() { try { return JSON.parse(localStorage.getItem(STORAGE_KEY)||"[]"); } catch { return []; } }
function saveLocal(data) { const l=getSubmissions(); l.push({...data,time:new Date().toLocaleString("ms-MY")}); localStorage.setItem(STORAGE_KEY,JSON.stringify(l)); }
async function sendToNetlify() { const fd=new FormData(); fd.append("form-name","dvlfams-application"); questions.forEach(q=>fd.append(q.netlifyKey,answers[q.id]||"")); try{await fetch("/",{method:"POST",body:fd});}catch(e){} }

function buildTracker() {
  document.getElementById("step-tracker").innerHTML = questions.map((q,i)=>`
    <div class="step-item ${i===0?'active':''}" id="step-item-${i}">
      <div class="step-num">${String(i+1).padStart(2,'0')}</div>
      <div class="step-line-wrap">
        <div class="step-label-text">${q.short}</div>
        <div class="step-bar"></div>
      </div>
    </div>`).join('');
}

function updateTracker() {
  questions.forEach((_,i)=>{
    const el=document.getElementById(`step-item-${i}`);
    if(el) el.className=`step-item ${i===step?'active':i<step?'done':''}`;
  });
}

function renderQuestion() {
  const q=questions[step];
  const pct=(step/questions.length)*100;
  document.getElementById("q-tag").textContent=`Q_${String(step+1).padStart(2,'0')}`;
  document.getElementById("q-progress-text").textContent=`${String(step+1).padStart(2,'0')} / ${String(questions.length).padStart(2,'0')}`;
  document.getElementById("progress-fill").style.width=pct+"%";
  document.getElementById("q-label").textContent=q.label.toUpperCase();
  document.getElementById("btn-back").style.visibility=step>0?"visible":"hidden";
  const next=document.getElementById("btn-next");
  next.innerHTML=step===questions.length-1?`SUBMIT <span class="btn-arrow">✓</span>`:`NEXT <span class="btn-arrow">→</span>`;
  const saved=answers[q.id]||"";
  const wrap=document.getElementById("q-input-wrap");
  if(q.type==="textarea") wrap.innerHTML=`<textarea id="current-input" placeholder="${q.placeholder}" oninput="onInput()">${saved}</textarea>`;
  else if(q.type==="text") wrap.innerHTML=`<input type="text" id="current-input" placeholder="${q.placeholder}" value="${saved}" oninput="onInput()"/>`;
  else if(q.type==="radio") wrap.innerHTML=`<div class="radio-group">${q.options.map(opt=>`<div class="radio-opt ${saved===opt?'selected':''}" onclick="selectRadio('${opt.replace(/'/g,"\\'")}',this)">${opt}</div>`).join('')}</div>`;
  updateTracker(); checkAnswer();
  const qs=document.getElementById("question-screen"); qs.style.animation="none"; qs.offsetHeight; qs.style.animation="fadeSlideIn 0.4s ease";
}

function onInput() { answers[questions[step].id]=document.getElementById("current-input")?.value||""; checkAnswer(); }
function selectRadio(val,el) { document.querySelectorAll(".radio-opt").forEach(r=>r.classList.remove("selected")); el.classList.add("selected"); answers[questions[step].id]=val; checkAnswer(); }
function checkAnswer() { const v=answers[questions[step].id]; document.getElementById("btn-next").disabled=!v||!v.toString().trim(); }

function nextStep() {
  const inp=document.getElementById("current-input");
  if(inp) answers[questions[step].id]=inp.value;
  if(step<questions.length-1){step++;renderQuestion();}else{submitForm();}
}
function prevStep() { if(step>0){step--;renderQuestion();} }

async function submitForm() {
  const btn=document.getElementById("btn-next");
  btn.disabled=true; btn.innerHTML=`SENDING... <span class="btn-arrow">↑</span>`;
  saveLocal(answers); await sendToNetlify();
  submitted=true;
  document.getElementById("question-screen").style.display="none";
  document.getElementById("success-screen").style.display="block";
  document.getElementById("success-code").textContent="REF: DVL-"+Math.random().toString(36).substring(2,8).toUpperCase();
  if(adminMode) revealAdminBtn();
}

function revealAdminBtn() { const b=document.getElementById("admin-btn"); b.style.display="inline-block"; b.textContent=`[ VIEW SUBMISSIONS (${getSubmissions().length}) ]`; }

document.getElementById("brand-logo").addEventListener("click",()=>{
  if(!submitted)return; adminClicks++;
  if(adminClicks>=5){adminMode=true;adminClicks=0;revealAdminBtn();}
});

function showSubmissions() {
  document.getElementById("submissions-overlay").style.display="block";
  const list=getSubmissions().reverse();
  document.getElementById("sub-count").textContent=`${list.length} entries`;
  if(!list.length){document.getElementById("submissions-list").innerHTML=`<div class="sub-empty">// no submissions yet</div>`;return;}
  document.getElementById("submissions-list").innerHTML=list.map(s=>`
    <div class="sub-entry">
      <div class="sub-user">${s.name||"UNKNOWN"}</div>
      <div class="sub-time">${s.time}</div>
      ${questions.filter(q=>q.id!=="name").map(q=>`<div class="sub-qa"><div class="sub-q">${q.short}</div><div class="sub-a">${s[q.id]||"—"}</div></div>`).join('')}
    </div>`).join('');
}
function hideSubmissions() { document.getElementById("submissions-overlay").style.display="none"; }

buildTracker(); renderQuestion();
  </script>
</body>
</html>
